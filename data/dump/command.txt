pg_restore -h localhost -U postgres -F t -d book_library_db data/dump/book_library_db.tar
cat data/dump/book_library_db.sql | psql -h localhost -U postgres book_library_db
sudo service postgresql restart
pg_dump -h localhost -U postgres -F t -f data/dump/book_library_db.tar book_library_db
pg_dump -h localhost -U postgres -F p -f data/dump/book_library_db.sql book_library_db
172.17.0.1
192.168.220.185

//Снятие дампа в сыром виде (-F p) без данных(-s) и  удаление структуры вначале(-с)
pg_dump -h localhost -U postgres -F p -f data/dump/book_library_db.sql -s -c book_library_db
//Снятие дампа(только инсерты)
pg_dump -h localhost -U postgres -F p -f data/dump/book_library_db_insert.sql -a --column-inserts book_library_db



//Добавление автоинкримента
ALTER TABLE countries alter COLUMN id add generated ALWAYS AS identity
//Удаление автоинкремента
alter table countries alter COLUMN id set GENERATED BY DEFAULT

//Создание таблицы стран с первичным ключом id
CREATE TABLE countries
(
    id int not null constraint countries_pk PRIMARY KEY,
    name varchar(2) not null,
    description varchar(255)
)

//Добавление сиквинсе к колонке таблицы(автоинкремент)
alter table countries alter column id set default nextval('countries_sq')

//Создание сиквинса
create sequence countries_sq

//Устанавливаем для сиквенса начальное айди
select setval('users_id_seq',max(id) + 1) from users

































db.local.di.config












<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:e_db="https://effective-group.ru/schema/dic/eff_tech_infrastructure_db"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
           http://symfony.com/schema/dic/services/services-1.0.xsd">
    <e_db:config>
        <e_db:connect>
            <e_db:dbType>pgsql</e_db:dbType>
            <e_db:user>postgres</e_db:user>
            <e_db:password>Qwerty12</e_db:password>
            <e_db:dbName>book_library_db</e_db:dbName>
            <e_db:host>localhost</e_db:host>
            <e_db:port>5432</e_db:port>
            <e_db:option name="a1">1</e_db:option>
            <e_db:option name="a2">2</e_db:option>
            <e_db:option name="a3">3</e_db:option>
        </e_db:connect>
    </e_db:config>
</container>